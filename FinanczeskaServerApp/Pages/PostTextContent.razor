@page "/post-text-content"

@using FinanczeskaServerApp.Data
@inject JsonDataSerializer _jsonDataSerializer
@inject IHttpContextAccessor _httpContextAccessor;

<h3>PostTextContent</h3>

<div class="container-md bg-light">
    
    <div class="ChatContainer col-12" style="min-height:400px;">
        <div class="QuestionContainer col-12">
            @text
        </div>
        <br/>
        <div class="AnswerContainer col-12">
            @*@foreach (string value in new List<string>())
            {
            <div>value</div>
            }*@
        </div>
    </div>

    <EditForm Model="@text" OnSubmit="@Submit">
        <div class="row">
            <div class="col-10">
                <InputText @bind-Value="text" style="height:50px; width:100%; border-radius: 10px; background: #D9D9D9; border: 2px solid grey;" />
            </div>
            <div class="col-2 text-center">
                <button class="SubmitButton" type="submit">Submit</button>
            </div>
        </div>
    </EditForm>

</div>





@code {
    private string text = "";


    private void Submit()
    {
        string? clientIP = _httpContextAccessor.HttpContext?.Connection.RemoteIpAddress?.ToString();
        if (clientIP == null)
        {
            clientIP = "undefinded";
        }
        _jsonDataSerializer.SerializeToJson(clientIP, text);
    }

}
